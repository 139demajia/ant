import "@ant.timer"
import "@ant.general"
import "@ant.render"
import "@ant.render.ibl"

system "procedural_sky_system"
    .implement "procedural_sky_system.lua"
    .method "data_changed"

policy "procedural_sky"
    .require_system "procedural_sky_system"
    .require_transform "ant.render.ibl|init_ibl_transform"
    .require_interface "ant.render.ibl|iibl"
    .component "procedural_sky"
    .component "ibl"

policy "procedural_sky_follow_sun"
    .require_system "procedural_sky_system"
    .component "procedural_sky"

component "procedural_sky"
    .implement "procedural_sky_system.lua"
    .method "init"

policy "skybox"
    .require_policy "ant.render|render"
    .require_system "skybox_system"
    .require_transform "skybox_transform"
    .require_transform "skybox_ibl_transform"
    .require_transform "ant.render.ibl|init_ibl_transform"
    .require_interface "ant.render.ibl|iibl"
    .component "skybox"
    .component "ibl"

transform "skybox_transform"
    .implement "skybox.lua"
    .input "skybox"
    .output "mesh"
    .method "process_prefab"

transform "skybox_ibl_transform"
    .implement "skybox.lua"
    .input "ibl"
    .input "_rendercache.material"
    .input "_ibl"
    .output "ibl.filter"
    .method "process_entity"

system "skybox_system"
    .implement "skybox.lua"
    .method "post_init"