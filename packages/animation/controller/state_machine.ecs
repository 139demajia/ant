import "@ant.timer"

system "state_machine_system"
    .implement "controller/state_machine.lua"
    .require_system "animation_system"
    .require_interface "ant.timer|timer"
    .method "animation_state"

interface "animation"
    .implement "controller/state_machine.lua"
    .require_interface "ant.timer|timer"
    .method "play"
    .method "set_state"
    .method "set_value"

policy "animation_controller.state_machine"
    .require_system "state_machine_system"
    .require_transform "state_machine_transform"
    .component "animation"
    .component "state_machine"

transform "state_machine_transform"
    .implement "controller/state_machine.lua"
    .input "state_machine"
    .output "animation"
    .method "process"

component "state_machine"
    .implement "controller/state_machine.lua"
    .method "init"
