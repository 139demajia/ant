local runtime = import_package "ant.imguibase".runtime
runtime.start {
	policy = {
		"ant.animation|animation",
		"ant.animation|state_chain",
		"ant.animation|ozzmesh",
		"ant.animation|ozz_skinning",
		"ant.serialize|serialize",
		"ant.bullet|collider.capsule",
		"ant.bullet|collider.box",
		"ant.bullet|collider.character",
		"ant.sky|procedural_sky",
		"ant.render|name",
		"ant.render|mesh",
		"ant.render|shadow_cast",
		"ant.render|render",
		"ant.render|bounding_draw",
		"ant.render|directional_light",
		"ant.render|ambient_light",
		--editor
		"ant.test.features|character_controller",
		"ant.objcontroller|select",
	},
	system = {
		"ant.test.features|init_loader",
	},
	pipeline = {
		{ name = "init",
			"init",
			"post_init",
		},
		{ name = "update",
			"start",
			"timer",
			"data_changed",
			{name = "collider",
				"update_collider_transform",
				"update_collider",
			},
			{ name = "animation",
				"animation_state",
				"sample_animation_pose",
				"skin_mesh",
			},
			{ name = "sky",
				"update_sun",
				"update_sky",
			},
			
			"widget",
			{ name = "render",
				"shadow_camera",
				"load_render_properties",
				"filter_primitive",
				"make_shadow",
				"debug_shadow",
				"cull",
				"render_commit",
				{ name = "postprocess",
					"bloom",
					"tonemapping",
					"combine_postprocess",
				}
			},
			-- editor
			"camera_control",
			"pickup",
			{ name = "ui",
				"ui_start",
				"ui",
				"ui_end",
			},
			"end_frame",
			"final",
		}
	}
}
