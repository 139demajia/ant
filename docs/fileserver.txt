ANT 的 runtime 会在设备本地维持一个虚拟文件系统的 cache ，通过网络向 file server 更新其中的文件。

本文档描述了和 file server 交互用的通讯协议。和 file server 交互用的 socket 通道，不仅仅用于文件交换，也会用于调试、虚拟输入设备等。文件交换协议只是交互协议的一个子集。

设备向开发机发起连接，以下运行设备被称为 C ，开发机（安装有开发环境的机器）被称为 S 。

一般情况下，不设计严格的问答请求协议，请求和回应都视为单向推送。例如，S 可以不经过 C 的请求直接发送一个文件，而 C 需要处理这种情况。C 对某个文件提出多次请求，S 可以只回应一次，也可以回应多次，多次回应时，以最后一次为准。

基本协议包为两字节(小端)长度 + 内容。长度不包括自身。例如，一个 0 字节的包，编码为 00 00 。内容由多个小节构成，每个小节均为 两字节（小端）长度 + 内容。内容可以包含 \0 。通常，第一个小节为协议名称。以下在记录协议的时候，通常只描述每个小节的含义。

请求：

ROOT 获取 ROOT hash

GET 获取指定 hash 对应的文件内容
hash sha1 小写 hex 格式

回应：

ROOT 新的 ROOT hash
hash sha1

FILE 推送文件
hash sha1
offset/size 用 / 分割的两个十进制文本数字。用来发送部分文件，对大文件来说，可能会分多条协议发送。offset 是 base 0 的，小文件可以直接 0/size 一次发送。
content 数据块。
注：offset/size 字段可以为空，这样 content 也为空。这种情况表示该文件不存在。如果文件内容为空，则应该发送 0/0 。





